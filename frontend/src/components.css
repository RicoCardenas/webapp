/* Reusable UI components shared across pages */

/* Buttons */
.btn,
.btn-primary,
.btn-ghost {
  appearance: none;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.55rem;
  border: 1px solid transparent;
  border-radius: var(--radius-md);
  padding: 0.75rem 1.35rem;
  font-weight: 600;
  line-height: 1.2;
  cursor: pointer;
  background: transparent;
  color: var(--color-text);
  transition: background var(--dur-1) var(--easing),
    color var(--dur-1) var(--easing),
    border-color var(--dur-1) var(--easing),
    box-shadow var(--dur-1) var(--easing),
    transform var(--dur-1) var(--easing);
  text-decoration: none;
}

.btn:hover { transform: translateY(-1px); }
.btn,
.btn:visited,
.btn:hover,
.btn:focus,
.btn:active {
  text-decoration: none;
}
.btn:disabled,
.btn[aria-disabled="true"] { opacity: 0.6; pointer-events: none; }

.btn--primary,
.btn-primary {
  background: linear-gradient(118deg,
      color-mix(in srgb, var(--color-primary) 96%, transparent) 0%,
      color-mix(in srgb, var(--color-primary) 68%, transparent) 100%);
  color: var(--color-primary-contrast);
  border-color: color-mix(in srgb, var(--color-primary) 55%, transparent);
  box-shadow: 0 18px 42px color-mix(in srgb, var(--color-primary) 32%, rgba(4, 8, 16, 0.6));
}

.btn--primary:hover {
  filter: saturate(1.05);
  box-shadow: 0 22px 48px color-mix(in srgb, var(--color-primary) 38%, rgba(4, 8, 16, 0.65));
}

.btn--ghost,
.btn-ghost {
  background: color-mix(in srgb, var(--color-panel) 92%, transparent);
  border-color: color-mix(in srgb, var(--color-border) 82%, transparent);
  color: var(--color-text);
  box-shadow: none;
}

.btn--ghost:hover {
  background: color-mix(in srgb, var(--color-panel) 96%, transparent);
  border-color: color-mix(in srgb, var(--color-primary) 35%, var(--color-border) 65%);
}

.btn--icon {
  padding: 0.55rem;
  width: 2.4rem;
  height: 2.4rem;
  border-radius: var(--radius-sm);
}

.btn--icon-only {
  padding: 0.45rem;
  min-width: auto;
  width: 2.65rem;
  height: 2.65rem;
}

.btn--sm { padding: 0.55rem 1rem; font-size: var(--fs-sm); border-radius: var(--radius-sm); }
.btn--has-icon { display: inline-flex; align-items: center; gap: 0.5rem; }


.btn__icon { display: inline-flex; align-items: center; justify-content: center; }
.btn__icon-img { width: 20px; height: 20px; object-fit: contain; }
.btn__icon-img--dark { display: none; }
.btn__label { white-space: nowrap; }

body.theme-dark .btn__icon-img--light,
html[data-theme="dark"] .btn__icon-img--light { display: none; }

body.theme-dark .btn__icon-img--dark,
html[data-theme="dark"] .btn__icon-img--dark { display: inline-block; }

.header__actions .btn--icon:not(.btn--primary),
.header__actions .btn--icon-only:not(.btn--primary) {
  background: color-mix(in srgb, var(--color-surface) 92%, transparent);
  border-color: color-mix(in srgb, var(--color-border) 68%, transparent);
  box-shadow: 0 12px 28px rgba(6, 10, 22, 0.35);
  color: var(--color-text);
  transition: background var(--dur-1) var(--easing),
    border-color var(--dur-1) var(--easing),
    box-shadow var(--dur-1) var(--easing),
    transform var(--dur-1) var(--easing);
}

.header__actions .btn--icon:not(.btn--primary):hover,
.header__actions .btn--icon-only:not(.btn--primary):hover {
  background: color-mix(in srgb, var(--color-surface) 98%, transparent);
  border-color: color-mix(in srgb, var(--color-primary) 28%, var(--color-border) 72%);
  box-shadow: 0 16px 34px rgba(6, 10, 22, 0.42);
}

.header__actions .btn--icon:not(.btn--primary):focus-visible,
.header__actions .btn--icon-only:not(.btn--primary):focus-visible {
  outline: 2px solid color-mix(in srgb, var(--color-primary) 45%, transparent);
  outline-offset: 2px;
}

.header__btn--logout {
  color: color-mix(in srgb, var(--color-danger) 85%, white 8%);
  border-color: color-mix(in srgb, var(--color-border) 68%, transparent);
  background: color-mix(in srgb, var(--color-surface) 94%, transparent);
}

.header__btn--logout:hover {
  background: color-mix(in srgb, var(--color-danger) 18%, var(--color-surface) 82%);
  border-color: color-mix(in srgb, var(--color-danger) 28%, var(--color-border) 72%);
  color: color-mix(in srgb, var(--color-danger) 95%, white 2%);
}

.header__btn--logout:focus-visible {
  outline: 2px solid color-mix(in srgb, var(--color-danger) 45%, transparent);
  outline-offset: 2px;
}

.header__btn--logout[disabled] {
  opacity: 0.55;
  pointer-events: none;
}

body.theme-light .header__actions .btn--icon:not(.btn--primary),
body.theme-light .header__actions .btn--icon-only:not(.btn--primary) {
  background: color-mix(in srgb, var(--color-panel) 96%, transparent);
  border-color: color-mix(in srgb, var(--color-border) 78%, transparent);
  box-shadow: 0 10px 26px rgba(15, 23, 42, 0.12);
}

body.theme-light .header__actions .btn--icon:not(.btn--primary):hover,
body.theme-light .header__actions .btn--icon-only:not(.btn--primary):hover {
  background: color-mix(in srgb, var(--color-panel) 98%, transparent);
  border-color: color-mix(in srgb, var(--color-primary) 20%, var(--color-border) 80%);
}

/* Icons */
.icon { display: inline-block; pointer-events: none; object-fit: contain; }
.icon--theme,
.icon--menu { width: 24px; height: 24px; }
.icon--menu { width: 28px; height: 28px; }
.icon--theme-dark,
.icon--menu-dark { display: none; }

body.theme-dark .icon--theme-light,
body.theme-dark .icon--menu-light,
html[data-theme="dark"] .icon--theme-light,
html[data-theme="dark"] .icon--menu-light { display: none; }

body.theme-dark .icon--theme-dark,
body.theme-dark .icon--menu-dark,
html[data-theme="dark"] .icon--theme-dark,
html[data-theme="dark"] .icon--menu-dark { display: inline-block; }

/* Header & navigation */
.header {
  position: sticky;
  top: 0;
  z-index: var(--z-header);
  background: color-mix(in srgb, var(--color-surface) 92%, transparent);
  backdrop-filter: saturate(135%) blur(16px);
  min-height: var(--header-height, 72px);
  display: flex;
  align-items: center;
  box-shadow: 0 1px 0 rgba(8, 13, 26, 0.18);
}

@media (max-width: 768px) {
  .header { min-height: var(--header-height-sm, 60px); }
}

.header__inner {
  width: min(100% - (var(--container-padding) * 2), var(--container-max));
  margin-inline: auto;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: clamp(0.75rem, 2vw, 1.5rem);
  padding-block: var(--space-2);
}

.header__brand { display: flex; align-items: center; gap: 0.75rem; }
.header__logo { display: inline-flex; align-items: center; gap: 0.65rem; font-weight: 700; font-size: var(--fs-md); color: var(--color-text); }
.header__logo-img { width: 40px; height: 40px; border-radius: var(--radius-sm); box-shadow: var(--shadow-sm); }
.header__logo-text { font-family: var(--font-display); letter-spacing: -0.01em; }

@media (max-width: 640px) {
  .header__logo-text { display: none; }
}

.header__nav { display: none; margin-left: var(--space-3); }
@media (min-width: 768px) {
  .header__nav { display: flex; flex: 1 1 auto; justify-content: center; }
}

.nav__list { display: flex; align-items: center; gap: clamp(0.75rem, 2vw, 1.5rem); padding: 0; margin: 0; list-style: none; }
.nav__link {
  display: inline-flex;
  align-items: center;
  gap: 0.35rem;
  padding: 0.4rem 0.85rem;
  border-radius: var(--radius-pill);
  color: var(--color-text-muted);
  font-size: var(--fs-sm);
  font-weight: 600;
  transition: color var(--dur-1) var(--easing), background-color var(--dur-1) var(--easing), transform var(--dur-1) var(--easing);
}

.nav__link:hover,
.nav__link:focus-visible,
.nav__link[aria-current="page"] {
  color: var(--color-primary-contrast);
  background: color-mix(in srgb, var(--color-primary) 32%, transparent);
  text-decoration: none;
}

.header__actions { display: flex; align-items: center; gap: 0.75rem; margin-left: auto; flex-wrap: wrap; }
.header__btn--menu { display: inline-flex; }

@media (min-width: 768px) {
  .header__btn--menu { display: none; }
}

/* Drawer */
.drawer {
  position: fixed;
  inset: 0;
  z-index: var(--z-drawer);
  visibility: hidden;
  opacity: 0;
  pointer-events: none;
  transition: opacity var(--dur-2) var(--easing), visibility var(--dur-2) var(--easing);
}

.drawer.is-open { visibility: visible; opacity: 1; pointer-events: auto; }

.drawer__overlay {
  position: absolute;
  inset: 0;
  background: rgba(6, 10, 22, 0.6);
  backdrop-filter: blur(14px);
}

.drawer__panel {
  position: absolute;
  inset: 0 0 0 auto;
  width: min(var(--drawer-width), 360px);
  background: color-mix(in srgb, var(--color-surface) 95%, transparent);
  border-inline-start: 1px solid color-mix(in srgb, var(--color-border) 80%, transparent);
  box-shadow: var(--shadow-lg);
  padding: clamp(1.5rem, 4vw, 2.25rem);
  display: flex;
  flex-direction: column;
  gap: var(--space-4);
  transform: translateX(6%);
  transition: transform var(--dur-2) var(--easing);
}

.drawer.is-open .drawer__panel { transform: translateX(0); }

.drawer__header { display: flex; align-items: center; justify-content: space-between; gap: var(--space-2); }
.drawer__title { font-size: var(--fs-md); font-family: var(--font-display); }
.drawer__close { border-radius: var(--radius-sm); }

.drawer__nav { display: flex; flex-direction: column; gap: var(--space-3); }
.drawer__list { list-style: none; padding: 0; margin: 0; display: grid; gap: 0.75rem; }
.drawer__item { margin: 0; }
.drawer__link {
  display: inline-flex;
  align-items: center;
  padding: 0.65rem 1rem;
  border-radius: var(--radius-md);
  background: color-mix(in srgb, var(--color-panel) 92%, transparent);
  border: 1px solid color-mix(in srgb, var(--color-border) 82%, transparent);
  color: var(--color-text);
  font-weight: 600;
}

.drawer__link:hover { background: color-mix(in srgb, var(--color-panel) 96%, transparent); text-decoration: none; }
.drawer__actions { display: grid; gap: 0.65rem; margin-top: auto; }
.drawer__btn { width: 100%; justify-content: center; }

/* Footer */
.footer {
  margin-top: auto;
  padding: clamp(2.2rem, 5vw, 3.5rem) 0;
  background: color-mix(in srgb, var(--color-surface) 94%, transparent);
  border-top: 1px solid color-mix(in srgb, var(--color-border) 80%, transparent);
}

.footer__inner {
  width: min(100% - (var(--container-padding) * 2), var(--container-max));
  margin-inline: auto;
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  text-align: center;
  color: var(--color-text-muted);
  font-size: var(--fs-sm);
}

.footer__list { display: inline-flex; align-items: center; gap: 0.75rem; justify-content: center; }
.footer__link { color: inherit; }
.footer__link:hover { color: var(--color-primary); }

/* Cards & surfaces */
.card {
  position: relative;
  display: flex;
  flex-direction: column;
  gap: clamp(1rem, 2vw, 1.4rem);
  padding: clamp(1.5rem, 2.6vw, 2.2rem);
  border-radius: var(--radius-lg);
  border: 1px solid color-mix(in srgb, var(--border, var(--color-border)) 85%, transparent);
  background: color-mix(in srgb, var(--card, var(--color-panel)) 96%, transparent);
  box-shadow: var(--shadow-sm);
  min-height: 240px;
  transition: box-shadow var(--dur-2) var(--easing);
}

.card > * {
  position: relative;
  z-index: 1;
}

.card:hover,
.card:focus-within {
  box-shadow: var(--shadow-md);
}

@media (prefers-reduced-motion: reduce) {
  .card,
  .card:hover,
  .card:focus-within { transition: none; }
}

.panel {
  background: linear-gradient(150deg,
      color-mix(in srgb, var(--color-surface) 94%, transparent) 0%,
      color-mix(in srgb, var(--color-panel) 42%, transparent) 100%);
  border: 1px solid color-mix(in srgb, var(--color-border) 70%, transparent);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-lg);
  padding: clamp(1.6rem, 3vw, 2.2rem);
}

.table-wrapper {
  overflow: auto;
  background: var(--color-surface);
  border: 1px solid color-mix(in srgb, var(--color-border) 72%, transparent);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-sm);
}

.badge {
  display: inline-flex;
  align-items: center;
  gap: 0.35rem;
  padding: 0.35rem 0.6rem;
  border-radius: var(--radius-pill);
  background: color-mix(in srgb, var(--color-primary) 85%, transparent);
  color: var(--color-primary-contrast);
  font-weight: 600;
  font-size: var(--fs-xs);
}

.chip {
  display: inline-flex;
  align-items: center;
  gap: 0.4rem;
  padding: 0.4rem 0.9rem;
  border-radius: var(--radius-pill);
  border: 1px solid color-mix(in srgb, var(--border, var(--color-border)) 80%, transparent);
  background: color-mix(in srgb, var(--card, var(--color-panel)) 94%, transparent);
  color: var(--muted, var(--color-text-muted));
  font-size: var(--fs-sm);
  font-weight: 500;
  cursor: pointer;
  transition: transform var(--dur-1) var(--easing),
    background-color var(--dur-1) var(--easing),
    color var(--dur-1) var(--easing),
    border-color var(--dur-1) var(--easing);
}

.chip:hover {
  transform: translateY(-1px);
  background: color-mix(in srgb, var(--primary, var(--color-primary)) 18%, var(--card, var(--color-panel)) 82%);
  color: var(--text);
  border-color: color-mix(in srgb, var(--primary, var(--color-primary)) 45%, transparent);
}

.chip:focus-visible {
  outline: 2px solid color-mix(in srgb, var(--primary, var(--color-primary)) 55%, transparent);
  outline-offset: 2px;
}

.chip[data-copied] {
  background: color-mix(in srgb, var(--primary, var(--color-primary)) 26%, var(--card, var(--color-panel)) 74%);
  color: var(--text);
  border-color: color-mix(in srgb, var(--primary, var(--color-primary)) 45%, transparent);
}

@media (prefers-reduced-motion: reduce) {
  .chip,
  .chip:hover { transition: none; transform: none; }
}

.pill {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0.28rem 0.75rem;
  border-radius: var(--radius-pill);
  background: color-mix(in srgb, var(--color-panel) 92%, transparent);
  border: 1px solid color-mix(in srgb, var(--color-border) 70%, transparent);
  font-size: var(--fs-xs);
}

/* Plotter lists & sidebars */
.sidebar__header {
  font-size: var(--fs-xs);
  text-transform: uppercase;
  letter-spacing: 0.12em;
  color: var(--color-text-muted);
  font-weight: 600;
}

.sidebar__list {
  display: grid;
  gap: 0.5rem;
  margin: 0;
  padding: 0;
}

.sidebar__list:empty::before {
  content: 'Agrega tu primera expresión para verla aquí.';
  display: block;
  padding: 0.75rem 0.9rem;
  border-radius: var(--radius-md);
  border: 1px dashed color-mix(in srgb, var(--color-border) 65%, transparent);
  color: var(--color-text-muted);
  text-align: center;
  font-size: var(--fs-xs);
}

.history__list {
  display: grid;
  gap: 0.75rem;
  margin: 0;
  padding: 0;
}

.history__row {
  display: grid;
  grid-template-columns: auto 1fr auto;
  align-items: center;
  gap: 0.75rem;
  padding: 0.65rem 0.85rem;
  border-radius: var(--radius-md);
  border: 1px solid color-mix(in srgb, var(--color-border) 70%, transparent);
  background: color-mix(in srgb, var(--color-surface) 92%, transparent);
  box-shadow: var(--shadow-sm);
  transition: border-color var(--dur-1) var(--easing), transform var(--dur-1) var(--easing);
}

.history__row:hover {
  border-color: color-mix(in srgb, var(--color-primary) 45%, transparent);
  transform: translateY(-1px);
}

.history__check {
  accent-color: var(--color-primary);
  width: 1.05rem;
  height: 1.05rem;
}

.history__expr {
  font-weight: 600;
  color: var(--color-text);
  overflow-wrap: anywhere;
}

.history__date {
  font-size: var(--fs-xs);
  color: var(--color-text-muted);
  justify-self: end;
}

/* Forms */
.form { display: grid; gap: var(--space-4); }
.form__field { display: grid; gap: 0.5rem; }
.form__label { font-weight: 600; color: var(--color-text); }

.form__input,
.form__textarea,
select.form__input {
  width: 100%;
  padding: 0.75rem 0.9rem;
  border-radius: var(--radius-md);
  background: color-mix(in srgb, var(--color-surface) 92%, transparent);
  border: 1px solid color-mix(in srgb, var(--color-border) 85%, transparent);
  color: var(--color-text);
  transition: border-color var(--dur-1) var(--easing), box-shadow var(--dur-1) var(--easing);
}

.form__input::placeholder,
.form__textarea::placeholder { color: color-mix(in srgb, var(--color-text-muted) 80%, transparent); }

.form__input:hover,
.form__textarea:hover,
select.form__input:hover { border-color: color-mix(in srgb, var(--color-primary) 28%, var(--color-border) 72%); }

.form__input:focus-visible,
.form__textarea:focus-visible,
select.form__input:focus-visible {
  border-color: color-mix(in srgb, var(--color-primary) 55%, var(--color-border) 45%);
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--color-primary) 24%, transparent);
}

.form__error { font-size: var(--fs-xs); color: color-mix(in srgb, var(--color-danger) 88%, transparent); }
.form__hint,
.form__microcopy { font-size: var(--fs-xs); color: color-mix(in srgb, var(--color-text-muted) 85%, transparent); }

.form__actions { display: flex; flex-wrap: wrap; gap: 0.75rem; justify-content: flex-end; }
.form__actions--split { justify-content: space-between; align-items: center; }
.form__error { display: none; }
.form__error.is-visible { display: block; }
.form__errors {
  display: none;
  color: color-mix(in srgb, var(--color-danger) 92%, transparent);
  font-weight: 600;
  font-size: var(--fs-sm);
}
.form__errors.is-visible { display: block; }
.form__link,
button.form__link {
  color: var(--color-primary);
  background: none;
  border: none;
  padding: 0;
  cursor: pointer;
  font: inherit;
  text-decoration: underline;
}

.status {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  font-size: var(--fs-sm);
  color: color-mix(in srgb, var(--color-text-muted) 85%, transparent);
}

.status--loading::before {
  content: '';
  width: 0.85em;
  height: 0.85em;
  border-radius: 50%;
  border: 2px solid color-mix(in srgb, var(--color-info) 40%, transparent);
  border-top-color: var(--color-info);
  animation: spin var(--dur-2, 0.35s) linear infinite;
}

.status-message {
  min-height: 1.25rem;
  margin-bottom: var(--space-2);
  font-size: var(--fs-sm);
  color: color-mix(in srgb, var(--color-text-muted) 82%, transparent);
}

.status-message--error {
  color: var(--color-danger);
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.input-group {
  display: flex;
  align-items: stretch;
  gap: 0.35rem;
  border-radius: var(--radius-pill);
  background: color-mix(in srgb, var(--color-surface) 95%, transparent);
  border: 1px solid color-mix(in srgb, var(--color-border) 85%, transparent);
  padding: 0.35rem;
}

.input-group__input {
  flex: 1 1 auto;
  border: none;
  background: transparent;
  padding: 0.5rem 0.9rem;
}

.input-group__button { flex: 0 0 auto; }

input[type="checkbox"],
input[type="radio"] {
  width: 18px;
  height: 18px;
  border-radius: var(--radius-sm);
  border: 1px solid color-mix(in srgb, var(--color-border) 80%, transparent);
}

/* Toasts */
.toasts,
#toasts {
  position: fixed;
  bottom: clamp(1rem, 4vw, 2rem);
  right: clamp(1rem, 4vw, 2rem);
  display: grid;
  gap: 0.75rem;
  width: min(360px, 92vw);
  z-index: var(--z-toast);
}

#toasts > div {
  display: grid;
  grid-auto-flow: column;
  grid-auto-columns: 1fr max-content;
  gap: 0.65rem;
  align-items: center;
  padding: 0.85rem 1.05rem;
  border-radius: var(--radius-lg);
  background: color-mix(in srgb, var(--color-surface) 92%, transparent);
  border: 1px solid color-mix(in srgb, var(--color-border) 82%, transparent);
  box-shadow: var(--shadow-md);
  font-size: var(--fs-sm);
  font-weight: 600;
  color: var(--color-text);
}

#toasts > div.is-success { border-color: color-mix(in srgb, var(--color-success) 45%, transparent); background: color-mix(in srgb, var(--color-success) 18%, var(--color-surface) 82%); }
#toasts > div.is-danger { border-color: color-mix(in srgb, var(--color-danger) 45%, transparent); background: color-mix(in srgb, var(--color-danger) 16%, var(--color-surface) 84%); }
#toasts > div.is-info { border-color: color-mix(in srgb, var(--color-info) 45%, transparent); background: color-mix(in srgb, var(--color-info) 18%, var(--color-surface) 82%); }
#toasts > div.is-warning { border-color: color-mix(in srgb, var(--color-warning) 45%, transparent); background: color-mix(in srgb, var(--color-warning) 20%, var(--color-surface) 80%); }

body.theme-dark #toasts > div,
html[data-theme="dark"] #toasts > div { background: color-mix(in srgb, var(--color-surface) 85%, transparent); }

body.theme-dark #toasts > div.is-success,
html[data-theme="dark"] #toasts > div.is-success { background: color-mix(in srgb, var(--color-success) 24%, var(--color-surface) 76%); }

body.theme-dark #toasts > div.is-danger,
html[data-theme="dark"] #toasts > div.is-danger { background: color-mix(in srgb, var(--color-danger) 22%, var(--color-surface) 78%); }

body.theme-dark #toasts > div.is-info,
html[data-theme="dark"] #toasts > div.is-info { background: color-mix(in srgb, var(--color-info) 24%, var(--color-surface) 76%); }

body.theme-dark #toasts > div.is-warning,
html[data-theme="dark"] #toasts > div.is-warning { background: color-mix(in srgb, var(--color-warning) 26%, var(--color-surface) 74%); }

/* Modals */
.modal {
  position: fixed;
  inset: 0;
  display: none;
  align-items: center;
  justify-content: center;
  padding: clamp(1.6rem, 4vw, 3.2rem);
  z-index: var(--z-modal);
}

.modal.is-open { display: flex; }

.modal__overlay {
  position: absolute;
  inset: 0;
  background: rgba(6, 10, 22, 0.62);
  backdrop-filter: blur(18px);
  opacity: 0;
  transition: opacity var(--dur-2) var(--easing);
}

.modal.is-open .modal__overlay { opacity: 1; }

.modal__dialog {
  position: relative;
  width: min(95vw, 520px);
  background: color-mix(in srgb, var(--color-panel) 94%, transparent);
  border: 1px solid color-mix(in srgb, var(--color-border) 80%, transparent);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-lg);
  display: flex;
  flex-direction: column;
  gap: var(--space-3);
  padding: clamp(1.8rem, 3vw, 2.4rem);
  color: var(--color-text);
  transform: translateY(24px);
  opacity: 0;
  transition: transform var(--dur-2) var(--easing), opacity var(--dur-2) var(--easing);
}

.modal.is-open .modal__dialog { transform: translateY(0); opacity: 1; }

.modal__header,
.modal__footer { display: flex; align-items: center; justify-content: space-between; gap: var(--space-2); }
.modal__title { font-family: var(--font-display); font-size: var(--fs-lg); margin: 0; }
.modal__body { display: grid; gap: var(--space-3); max-height: min(70vh, 420px); overflow: auto; }

.modal__close { border-radius: var(--radius-sm); padding: 0.35rem; border: 1px solid color-mix(in srgb, var(--color-border) 75%, transparent); background: color-mix(in srgb, var(--color-surface) 95%, transparent); }
.modal__close:hover { transform: translateY(-1px); background: color-mix(in srgb, var(--color-surface) 88%, transparent); }
.modal__close:focus-visible { outline: 2px solid color-mix(in srgb, var(--color-primary) 45%, transparent); outline-offset: 2px; }

@media (max-width: 640px) {
  .modal { padding: var(--space-4); }
  .modal__dialog { width: 100%; }
}

/* Utility links */
.link {
  background: none;
  border: none;
  color: var(--color-primary);
  padding: 0;
  cursor: pointer;
  text-decoration: underline;
}
